"use strict";class NxMultiStep{config(t){NxMultiStep.$class=t,this.render()}render(){let t=document.querySelectorAll(NxMultiStep.$class);if(t)for(let e=0;e<t.length;e++){let n=t[e];n.setAttribute("nxforms-index",e),NxMultiStep.instance().setup_button(n,e),NxMultiStep.instance().step_control(n,e),NxMultiStep.instance().tabs_control(n,e)}}setup_button(t,e){var n=t.querySelector(".submit-button-section"),i=n.querySelector(".nxmulti-step-submit");if(i){i.setAttribute("nxsubmit-index",e),i.setAttribute("nxsubmit-type","next"),i.addEventListener("click",function(e){NxMultiStep.instance().control_button(t,this,e)});var r=i.getAttribute("next-text");r||(r="Next"),i.innerHTML=r;var s=i.getAttribute("pre-enable");if(s||(s=!0),s){var l=i.getAttribute("pre-text");l||(l="Back");var u=document.createElement("button");u.setAttribute("type","button"),u.setAttribute("class","nxmulti-step-preview"),u.setAttribute("nxsubmit-index",e),u.setAttribute("nxsubmit-type","pre"),u.innerHTML=l,u.addEventListener("click",function(e){NxMultiStep.instance().control_button(t,this,e)}),n.insertBefore(u,n.childNodes[0])}}}control_button(t,e,n){var i=e.getAttribute("nxsubmit-index");i||(i=0);var r=e.getAttribute("nxsubmit-type");if(r||(r="next"),"next"==r){n.preventDefault();let e=t.querySelector(".settings-content > div.active");if(!e)return!1;(s=e.nextElementSibling.getAttribute("nxtab-index"))||(s="0-0"),NxMultiStep.instance().toggle_tab(t,s);let i=t.querySelector('.nav-setting li > a[nxstep-index="'+s+'"]');NxMultiStep.instance().toggle_step(i,t)}else if("pre"==r){n.preventDefault();let e=t.querySelector(".settings-content > div.active");if(!e)return!1;var s;(s=e.previousElementSibling.getAttribute("nxtab-index"))||(s="0-0"),NxMultiStep.instance().toggle_tab(t,s);let i=t.querySelector('.nav-setting li > a[nxstep-index="'+s+'"]');NxMultiStep.instance().toggle_step(i,t)}}step_control(t,e){var n=t.querySelector(".nav-setting");if(n){var i=n.getAttribute("nx-control");i||(i="yes");var r=n.querySelectorAll("li > a");if(r)for(var s=0;s<r.length;s++)r[s]&&(r[s].setAttribute("nxstep-index",Number(e)+"-"+Number(s)),"yes"==i&&r[s].addEventListener("click",function(e){e.preventDefault();NxMultiStep.instance().toggle_step(this,t),NxMultiStep.instance().show_tab(this,t)}))}}toggle_step(t,e){var n=e.querySelectorAll(".nav-setting li > a");if(n)for(let e=0;e<n.length;e++){let i=n[e];t!=i&&i.parentElement.classList.remove("active")}t.parentElement.classList.add("active")}show_tab(t,e){var n=t.getAttribute("nxstep-index");n||(n="0-0");var i=e.querySelector(".nav-setting li.active a");if(!i)return!1;var r=i.getAttribute("nxstep-index");r||(r=n),NxMultiStep.instance().toggle_tab(e,r)}tabs_control(t,e){var n=t.querySelector(".settings-content");if(n){var i=n.querySelectorAll('div[class^="ncode-tabs-"]');if(i)for(var r=0;r<i.length;r++)i[r]&&i[r].setAttribute("nxtab-index",Number(e)+"-"+Number(r));NxMultiStep.instance().button_toogle(t)}}toggle_tab(t,e){var n=t.querySelector(".settings-content");if(n){var i=n.querySelectorAll('div[class^="ncode-tabs-"]');if(i)for(var r=0;r<i.length;r++)i[r]&&i[r].classList.remove("active");n.querySelector('div[nxtab-index="'+e+'"]').classList.add("active"),NxMultiStep.instance().button_toogle(t)}}button_toogle(t){var e=t.querySelector(".settings-content"),n=t.querySelector(".submit-button-section"),i=e.querySelector('div[class^="ncode-tabs-"].active');var r;i.previousElementSibling?(r=n.querySelector(".nxmulti-step-preview"))&&r.removeAttribute("style"):(r=n.querySelector(".nxmulti-step-preview"))&&r.setAttribute("style","display: none;");var s,l;i.nextElementSibling?(s=n.querySelector(".nxmulti-step-submit"))&&((l=s.getAttribute("next-text"))||(l="Next"),s.innerHTML=l,s.setAttribute("nxsubmit-type","next")):(s=n.querySelector(".nxmulti-step-submit"))&&((l=s.getAttribute("submit-text"))||(l="Submit"),s.innerHTML=l,s.setAttribute("nxsubmit-type","submit"))}static instance(){return new NxMultiStep}}